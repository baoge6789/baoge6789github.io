<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>挪车二维码生成器</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.qrcode/1.0/jquery.qrcode.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        #qrcode { margin-top: 20px; }
        button { margin-top: 10px; padding: 10px 15px; font-size: 16px; }
        input { padding: 10px; font-size: 16px; width: calc(100% - 22px); }
    </style>
</head>
<body>

<h1>挪车二维码生成器</h1>
<label for="plate">车牌号:</label>
<input type="text" id="plate" placeholder="请输入车牌号"><br>
<label for="phone">手机号:</label>
<input type="text" id="phone" placeholder="请输入手机号"><br>
<button id="generate">生成二维码</button>

<div id="qrcode"></div>

<button id="download" style="display:none;">下载二维码</button>
<button id="call" style="display:none;">一键呼叫</button>
<button id="sms" style="display:none;">发送短信通知</button>

<script>
document.getElementById('generate').onclick = function() {
    const plate = document.getElementById('plate').value.trim();
    const phone = document.getElementById('phone').value.trim();

    if (!plate || !phone) {
        alert("请填写车牌号和手机号！");
        return;
    }

    const content = `车牌号：${plate}，手机号：${phone}`;
    
    // 清空之前的二维码
    document.getElementById('qrcode').innerHTML = '';

    // 生成二维码
    $('#qrcode').qrcode({
        text: content,
        width: 200,
        height: 200
    });

    // 显示下载、呼叫和短信按钮
    document.getElementById('download').style.display = 'inline-block';
    document.getElementById('call').style.display = 'inline-block';
    document.getElementById('sms').style.display = 'inline-block';
};

document.getElementById('download').onclick = function() {
    const canvas = document.querySelector('#qrcode canvas');
    if (canvas) {
        const link = document.createElement('a');
        link.href = canvas.toDataURL('image/png');
        link.download = 'qrcode.png';
        link.click();
    } else {
        alert("请先生成二维码！");
    }
};

document.getElementById('call').onclick = function() {
    const phone = document.getElementById('phone').value.trim();
    if (phone) {
        window.location.href = `tel:${phone}`;
    } else {
        alert("请先输入手机号！");
    }
};

document.getElementById('sms').onclick = function() {
    const phone = document.getElementById('phone').value.trim();
    if (phone) {
        window.location.href = `sms:${phone}?body=请挪车，谢谢！`;
    } else {
        alert("请先输入手机号！");
    }
};
</script>

</body>
</html>
